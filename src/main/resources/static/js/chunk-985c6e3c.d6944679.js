(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-985c6e3c"],{"086b":function(e,t,a){"use strict";var o=a("3650"),l=a.n(o);l.a},3650:function(e,t,a){},"9a1b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("template",{slot:"header"},[a("div",{staticClass:"module-header"},[a("div",{staticClass:"left-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,size:"mini",model:e.formInline}},[a("el-form-item",{attrs:{label:"batchNum"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.formInline.batchNum,callback:function(t){e.$set(e.formInline,"batchNum",t)},expression:"formInline.batchNum"}})],1),a("el-form-item",{attrs:{label:"boxFrom"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.formInline.boxFrom,callback:function(t){e.$set(e.formInline,"boxFrom",t)},expression:"formInline.boxFrom"}})],1),a("el-form-item",{attrs:{label:"boxTo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.formInline.boxTo,callback:function(t){e.$set(e.formInline,"boxTo",t)},expression:"formInline.boxTo"}})],1),a("el-form-item",{attrs:{label:"colFrom"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.formInline.colFrom,callback:function(t){e.$set(e.formInline,"colFrom",t)},expression:"formInline.colFrom"}})],1),a("el-form-item",{attrs:{label:"colTo"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.formInline.colTo,callback:function(t){e.$set(e.formInline,"colTo",t)},expression:"formInline.colTo"}})],1),a("el-form-item",{attrs:{label:"status"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.formInline.status,callback:function(t){e.$set(e.formInline,"status",t)},expression:"formInline.status"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.hadndleSearch}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"right-box"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAdd}},[e._v("批量操作")])],1)])]),a("d2-module",[a("div",{staticClass:"table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",height:"500"}},[a("el-table-column",{attrs:{fixed:"",prop:"id",label:"id",width:"100"}}),a("el-table-column",{attrs:{prop:"batchNum",label:"batchNum",width:"100"}}),a("el-table-column",{attrs:{prop:"boxNum",label:"boxNum",width:"100"}}),a("el-table-column",{attrs:{prop:"colNum",label:"colNum",width:"100"}}),a("el-table-column",{attrs:{prop:"unit",label:"unit",width:"100"}}),a("el-table-column",{attrs:{prop:"displayStoreTime",label:"storeTime",width:"160"}}),a("el-table-column",{attrs:{prop:"displaySendTime",label:"sendTime",width:"160"}}),a("el-table-column",{attrs:{prop:"displayBackTime",label:"backTime",width:"160"}}),a("el-table-column",{attrs:{prop:"keeper",label:"keeper",width:"100"}}),a("el-table-column",{attrs:{prop:"consumer",label:"consumer",width:"100"}}),a("el-table-column",{attrs:{prop:"status",label:"status",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v(" 入库 ")]):e._e(),2===t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v(" 发出 ")]):e._e(),3===t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v(" 退还 ")]):e._e(),4===t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v(" 已使用 ")]):e._e()]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{"current-page":e.pager.pageNo,"page-size":10,layout:"total, prev, pager, next",total:e.pager.total},on:{"update:currentPage":function(t){return e.$set(e.pager,"pageNo",t)},"update:current-page":function(t){return e.$set(e.pager,"pageNo",t)},"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{title:"批量操作",visible:e.dialogBatchFormVisible,width:"700px"},on:{"update:visible":function(t){e.dialogBatchFormVisible=t}}},[a("el-form",{attrs:{model:e.batchForm,size:"mini","label-position":"right"}},[a("el-form-item",{attrs:{label:"optType","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.batchForm.optType,callback:function(t){e.$set(e.batchForm,"optType",t)},expression:"batchForm.optType"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"boxNum","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.batchForm.batchNum,callback:function(t){e.$set(e.batchForm,"batchNum",t)},expression:"batchForm.batchNum"}})],1),a("el-form-item",{attrs:{label:"boxFrom","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.batchForm.boxFrom,callback:function(t){e.$set(e.batchForm,"boxFrom",t)},expression:"batchForm.boxFrom"}})],1),a("el-form-item",{attrs:{label:"boxTo","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.batchForm.boxTo,callback:function(t){e.$set(e.batchForm,"boxTo",t)},expression:"batchForm.boxTo"}})],1),a("el-form-item",{attrs:{label:"colFrom","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.batchForm.colFrom,callback:function(t){e.$set(e.batchForm,"colFrom",t)},expression:"batchForm.colFrom"}})],1),a("el-form-item",{attrs:{label:"colTo","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.batchForm.colTo,callback:function(t){e.$set(e.batchForm,"colTo",t)},expression:"batchForm.colTo"}})],1),a("el-form-item",{attrs:{label:"type","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.batchForm.type,callback:function(t){e.$set(e.batchForm,"type",t)},expression:"batchForm.type"}},e._l(e.types,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"keeper","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.keeper,callback:function(t){e.$set(e.form,"keeper",t)},expression:"form.keeper"}})],1),a("el-form-item",{attrs:{label:"consumer","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.consumer,callback:function(t){e.$set(e.form,"consumer",t)},expression:"form.consumer"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogBatchFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleBatchSubmit}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:e.editTitle,visible:e.dialogFormVisible,width:"700px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,size:"mini","label-position":"right"}},[a("el-form-item",{attrs:{label:"batchNum","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.batchNum,callback:function(t){e.$set(e.form,"batchNum",t)},expression:"form.batchNum"}})],1),a("el-form-item",{attrs:{label:"boxNum","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.boxNum,callback:function(t){e.$set(e.form,"boxNum",t)},expression:"form.boxNum"}})],1),a("el-form-item",{attrs:{label:"colNum","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.colNum,callback:function(t){e.$set(e.form,"colNum",t)},expression:"form.colNum"}})],1),a("el-form-item",{attrs:{label:"unit","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),a("el-form-item",{attrs:{label:"storeTime","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp","picker-options":e.pickerOptions,placeholder:"选择日期时间"},model:{value:e.form.storeTime,callback:function(t){e.$set(e.form,"storeTime",t)},expression:"form.storeTime"}})],1),a("el-form-item",{attrs:{label:"sendTime","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp","picker-options":e.pickerOptions,placeholder:"选择日期时间"},model:{value:e.form.sendTime,callback:function(t){e.$set(e.form,"sendTime",t)},expression:"form.sendTime"}})],1),a("el-form-item",{attrs:{label:"backTime","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp","picker-options":e.pickerOptions,placeholder:"选择日期时间"},model:{value:e.form.backTime,callback:function(t){e.$set(e.form,"backTime",t)},expression:"form.backTime"}})],1),a("el-form-item",{attrs:{label:"useTime","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date","value-format":"timestamp","picker-options":e.pickerOptions,placeholder:"选择日期时间"},model:{value:e.form.useTime,callback:function(t){e.$set(e.form,"useTime",t)},expression:"form.useTime"}})],1),a("el-form-item",{attrs:{label:"keeper","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.keeper,callback:function(t){e.$set(e.form,"keeper",t)},expression:"form.keeper"}})],1),a("el-form-item",{attrs:{label:"consumer","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.consumer,callback:function(t){e.$set(e.form,"consumer",t)},expression:"form.consumer"}})],1),a("el-form-item",{attrs:{label:"status","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1)],2)},l=[],r=(a("d81d"),a("d3b7"),a("25f0"),a("96cf"),a("1da1")),i=a("9bd2"),s=a("c276"),n=a("365c"),c={name:"page1",data:function(){return{query:{queryKey:"fixCode",queryValue:"",queryValue2:""},formInline:{batchNum:"",boxFrom:"",boxTo:"",colFrom:"",colTo:"",status:""},batchForm:{optType:"",batchNum:"",boxFrom:"",boxTo:"",type:"",colFrom:"",colTo:"",keeper:"",consumer:""},formLabelWidth:"120px",pager:{pageNo:1,pageSize:10,total:10},searchOptions:[{label:"固定码",value:"fixCode"},{label:"子码",value:"childCode"},{label:"状态",value:"status"},{label:"子码区间",value:"fromTo"}],types:[{label:"0.5kg/柱",value:0},{label:"1kg/柱",value:1},{label:"2kg/柱",value:2}],statusOptions:[{label:"入库",value:1},{label:"发出",value:2},{label:"退回",value:3},{label:"已使用",value:4}],tableData:[],form:{batchNum:"",boxNum:0,colNum:0,unit:0,storeTime:"",sendTime:"",backTime:"",useTime:"",status:"",keeper:"",consumer:""},isCreating:!1,dialogFormVisible:!1,dialogBatchFormVisible:!1,pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]}}},computed:{editTitle:function(){return this.isCreating?"新增":"编辑信息"}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},a=Object.assign({},e.formInline),a.pageNo=e.pager.pageNo,a.pageSize=e.pager.pageSize,t.next=6,n["a"].EXPLOSIVE_LIST(a);case 6:o=t.sent,o&&(e.pager.total=o.total,e.tableData=e.fixData(o.zhaYaoList));case 8:case"end":return t.stop()}}),t)})))()},fixData:function(e){return e&&0!==e.length?e.map((function(e){return e.displayStoreTime=s["a"].dateFormat(e.storeTime),e.displaySendTime=s["a"].dateFormat(e.sendTime),e.displayBackTime=s["a"].dateFormat(e.backTime),e})):[]},hadndleSearch:function(){this.getList()},handleCurrentChange:function(e){e&&(this.pager.pageNo=e),this.getList()},handleAdd:function(){this.isCreating=!0,this.batchForm={optType:"",batchNum:"",boxFrom:"",boxTo:"",type:"",colFrom:"",colTo:"",keeper:"",consumer:""},this.dialogBatchFormVisible=!0},handleEdit:function(e){this.isCreating=!1;var t=Object.assign({},e);t.from=t.childCode,t.to=t.childCode,this.form=Object.assign(this.form,t),this.dialogFormVisible=!0},handleDelete:function(e){var t=this,a=e.id,o=[];o=a.constructor!==Array?[a]:Object.assign([],a),this.$confirm("此操作将永久删除id为".concat(a.toString(),"的记录, 是否继续?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])({url:"/machine/del",method:"post",data:{ids:o}}).then((function(e){t.$message.success("删除成功"),t.getList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object.assign({},e.form),t.next=3,n["a"].EXPLOSIVE_UPDATE(a);case 3:o=t.sent,o&&o>=0?(e.$message.success("批量操作成功"),e.dialogFormVisible=!1):e.$message.error("批量操作失败");case 5:case"end":return t.stop()}}),t)})))()},handleBatchSubmit:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object.assign({},e.batchForm),o=e.getToday(),a.date=o,t.next=5,n["a"].EXPLOSIVE_BATCH();case 5:l=t.sent,l&&l>=0?(e.$message.success("批量操作成功"),e.dialogBatchFormVisible=!1):e.$message.error("批量操作失败");case 7:case"end":return t.stop()}}),t)})))()},getToday:function(){var e=+new Date;return e%864e5}}},m=c,u=(a("086b"),a("2877")),b=Object(u["a"])(m,o,l,!1,null,"58c4b783",null);t["default"]=b.exports},"9bd2":function(e,t,a){"use strict";a("99af"),a("d3b7");var o=a("4360"),l=a("cebe"),r=a.n(l),i=a("5f72"),s=a("c276"),n=Object({NODE_ENV:"production",VUE_APP_TITLE:"D2Admin",VUE_APP_API:"/api/",VUE_APP_REPO:"https://github.com/d2-projects/d2-admin-start-kit",VUE_APP_I18N_LOCALE:"zh-chs",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_ELEMENT_COLOR:"#409EFF",VUE_APP_VERSION:"1.20.1",VUE_APP_BUILD_TIME:"2020-11-2 18:37:20",BASE_URL:"/"}).VUE_APP_CAS_URL;function c(e){var t=new Error(e);throw m(t),t}function m(e){o["a"].dispatch("d2admin/log/add",{type:"error",err:e,info:"数据请求异常"}),"timeout of 5000ms exceeded"===e.message&&(e.message="请求超时"),Object(i["Message"])({message:e.message,type:"error",duration:5e3})}var u=r.a.create({baseURL:"/api/",timeout:1e4});u.interceptors.request.use((function(e){if(!/^https:\/\/|http:\/\//.test(e.url)){var t=s["a"].cookies.get("token");t&&"undefined"!==t&&(e.headers["X-Token"]=t)}return/^\/open\//.test(e.url)&&(e.baseURL="/"),e}),(function(e){console.log(e),Promise.reject(e)})),u.interceptors.response.use((function(e){var t=e.data,a=t.code;if(void 0===a)return t;switch(a){case 0:return t.data;case"xxx":c("".concat(e.config.url,": [ code: xxx ] ").concat(t.msg));break;default:c("".concat(e.config.url,": ").concat(t.message));break}}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:window.location.href=e.response.message||"".concat(n,"/login?service=").concat(encodeURIComponent(window.location.href)),e.message="未授权，请登录";break;case 403:e.message="权限不够，如需调整请联系架构组同学";break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:break}return m(e),Promise.reject(e)})),t["a"]=u}}]);